<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rwanda Tech Essentials - E-commerce Prototype</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Setup Inter font and custom scrollbar */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light Gray Background */
            color: #1f2937; /* Dark text */
        }
        /* Custom Cart Transition */
        .cart-sidebar {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Header / Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Logo -->
            <a href="#" class="text-3xl font-extrabold tracking-tight text-teal-600">
                <span class="font-light text-gray-800">Kigali</span><span class="font-bold">Tech</span>
            </a>
            
            <!-- Cart Button -->
            <button id="cart-toggle" class="relative p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition duration-150">
                <i data-lucide="shopping-cart" class="w-6 h-6 text-gray-700"></i>
                <span id="cart-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">
                    0
                </span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Hero Banner -->
        <section class="bg-teal-600 text-white rounded-xl p-8 md:p-12 mb-12 shadow-lg">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4">Essentials for the Rwandan Developer</h1>
            <p class="text-xl font-light mb-6">High-quality accessories, delivered fast across Kigali.</p>
            <button class="bg-white text-teal-600 font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-gray-100 transition duration-300">
                Shop New Arrivals
            </button>
        </section>

        <!-- Product Grid -->
        <section id="product-grid">
            <h2 class="text-3xl font-bold mb-8 text-center text-gray-800">Featured Products</h2>
            <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Product Cards will be inserted here by JavaScript -->
            </div>
        </section>

    </main>

    <!-- Cart Sidebar (Off-canvas) -->
    <div id="cart-sidebar" class="cart-sidebar fixed top-0 right-0 w-full md:w-96 h-full bg-white shadow-2xl z-[60] transform translate-x-full flex flex-col">
        
        <!-- Cart Header -->
        <div class="p-6 border-b flex justify-between items-center">
            <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                <i data-lucide="shopping-bag" class="w-6 h-6 mr-2 text-teal-600"></i>
                Your Cart
            </h3>
            <button id="close-cart" class="text-gray-500 hover:text-gray-800">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
        </div>

        <!-- Cart Items List -->
        <div id="cart-items-container" class="flex-grow overflow-y-auto p-6 space-y-4">
            <!-- Items will be injected here -->
            <p id="empty-cart-message" class="text-center text-gray-500 italic mt-12">Your cart is empty.</p>
        </div>

        <!-- Cart Footer / Total -->
        <div class="p-6 border-t bg-gray-50">
            <div class="flex justify-between font-semibold text-xl mb-4">
                <span>Subtotal:</span>
                <span id="cart-total" class="text-teal-600">RWF 0.00</span>
            </div>
            <button class="w-full bg-teal-600 text-white font-bold py-3 rounded-lg hover:bg-teal-700 transition duration-300 shadow-md">
                Proceed to Checkout
            </button>
            <p class="text-xs text-center text-gray-500 mt-3">Taxes and shipping calculated at checkout.</p>
        </div>

    </div>

    <!-- Overlay for when cart is open -->
    <div id="cart-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 hidden" onclick="toggleCart(false)"></div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p class="mb-2">&copy; <span id="current-year"></span> KigaliTech Prototype. All rights reserved.</p>
            <p class="text-gray-400">Developed as a school project by Witness Fabrice.</p>
        </div>
    </footer>

    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // 1. MOCK PRODUCT DATA
        const PRODUCTS = [
            { id: 1, name: "Mechanical Keyboard (Kigali Edition)", price: 85000, image: "download (2).jpeg" },
            { id: 2, name: "Fast Charge Power Bank (20,000mAh)", price: 24500, image: "download (3).jpeg" },
            { id: 3, name: "Noise-Cancelling Headphones", price: 62000, image: "download (4).jpeg" },
            { id: 4, name: "Ergonomic Mousepad", price: 8900, image: "download (5).jpeg" },
            { id: 5, name: "USB-C Hub 7-in-1", price: 17000, image: "download.png" },
            { id: 6, name: "500GB Portable SSD", price: 49900, image: "download (1).jpeg" },
        ];

        // 2. STATE MANAGEMENT
        let cart = []; // Array to hold { product: {}, quantity: 1 } objects

        // 3. DOM ELEMENTS
        const productList = document.getElementById('product-list');
        const cartItemsContainer = document.getElementById('cart-items-container');
        const cartTotalDisplay = document.getElementById('cart-total');
        const cartCountDisplay = document.getElementById('cart-count');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        
        const cartSidebar = document.getElementById('cart-sidebar');
        const cartOverlay = document.getElementById('cart-overlay');
        const cartToggleButton = document.getElementById('cart-toggle');
        const closeCartButton = document.getElementById('close-cart');

        // 4. UTILITY FUNCTIONS

        // Formats RWF currency
        const formatCurrency = (amount) => {
            return `RWF ${amount.toLocaleString('en-RW', { minimumFractionDigits: 2 })}`;
        };

        // Renders all product cards on the main page
        const renderProducts = () => {
            productList.innerHTML = PRODUCTS.map(product => `
                <div class="bg-white rounded-xl shadow-lg p-5 border border-gray-100 transition duration-300 hover:shadow-xl transform hover:-translate-y-1">
                    <!-- Image -->
                    <img src="${product.image}" alt="${product.name}" class="w-full h-40 object-cover rounded-lg mb-4">
                    
                    <!-- Details -->
                    <h3 class="text-lg font-semibold text-gray-900 truncate">${product.name}</h3>
                    <p class="text-2xl font-bold text-teal-600 mt-1 mb-3">${formatCurrency(product.price)}</p>
                    
                    <!-- CTA -->
                    <button onclick="addToCart(${product.id})"
                        class="w-full bg-teal-600 text-white py-2 rounded-lg font-medium hover:bg-teal-700 transition duration-200 flex items-center justify-center space-x-2 shadow-md">
                        <i data-lucide="plus-circle" class="w-5 h-5"></i>
                        <span>Add to Cart</span>
                    </button>
                </div>
            `).join('');
            lucide.createIcons(); // Re-initialize icons after DOM update
        };

        // Renders the cart sidebar content
        const renderCart = () => {
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '';
                emptyCartMessage.classList.remove('hidden');
                cartCountDisplay.textContent = 0;
                cartTotalDisplay.textContent = formatCurrency(0);
                return;
            }

            emptyCartMessage.classList.add('hidden');
            
            let total = 0;

            cartItemsContainer.innerHTML = cart.map(item => {
                const itemTotal = item.product.price * item.quantity;
                total += itemTotal;
                
                return `
                    <div class="flex items-center space-x-4 p-3 bg-gray-100 rounded-lg">
                        <img src="${item.product.image}" alt="${item.product.name}" class="w-16 h-16 object-cover rounded-md">
                        <div class="flex-grow">
                            <p class="font-semibold text-gray-900">${item.product.name}</p>
                            <p class="text-sm text-gray-600">${formatCurrency(item.product.price)} x ${item.quantity}</p>
                            <p class="font-bold text-teal-600">${formatCurrency(itemTotal)}</p>
                        </div>
                        <button onclick="removeFromCart(${item.product.id})" 
                                class="text-red-500 hover:text-red-700 transition duration-150">
                            <i data-lucide="trash-2" class="w-5 h-5"></i>
                        </button>
                    </div>
                `;
            }).join('');

            // Update footer totals and count
            cartTotalDisplay.textContent = formatCurrency(total);
            cartCountDisplay.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);

            lucide.createIcons(); // Re-initialize icons after DOM update
        };


        // 5. CART LOGIC

        // Add a product to the cart
        const addToCart = (productId) => {
            const product = PRODUCTS.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.product.id === productId);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ product: product, quantity: 1 });
            }
            renderCart();
            // Open the cart on first add
            if (cart.length === 1 && existingItem === undefined) {
                 toggleCart(true);
            }
        };

        // Remove an item (or reduce quantity) from the cart
        const removeFromCart = (productId) => {
            const itemIndex = cart.findIndex(item => item.product.id === productId);
            if (itemIndex > -1) {
                const item = cart[itemIndex];
                if (item.quantity > 1) {
                    item.quantity -= 1;
                } else {
                    cart.splice(itemIndex, 1); // Remove item entirely
                }
            }
            renderCart();
        };

        // 6. UI INTERACTION
        
        const toggleCart = (show) => {
            if (show === true) {
                cartSidebar.classList.remove('translate-x-full');
                cartOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden'; // Prevent scrolling
            } else {
                cartSidebar.classList.add('translate-x-full');
                cartOverlay.classList.add('hidden');
                document.body.style.overflow = '';
            }
        };

        // Event listeners
        cartToggleButton.addEventListener('click', () => {
            const isCartOpen = !cartSidebar.classList.contains('translate-x-full');
            toggleCart(!isCartOpen);
        });

        closeCartButton.addEventListener('click', () => toggleCart(false));
        
        // Initial setup
        window.onload = () => {
            renderProducts();
            renderCart();
        };

        // Initialize Lucide Icons for all dynamic and static elements
        lucide.createIcons();
    </script>

</body>
</html>
